{% extends "base.html" %}

{% block content %}
<h2 style="margin-top:0;">Admin Dashboard</h2>
<p class="hint">Manage and monitor attendance activity.</p>

<div class="grid">
  <div class="card span-4">
    <h3>Quick Actions</h3>
    <p>Refresh dashboard and view recent logs.</p>
    <div style="margin-top:12px; display:flex; gap:10px; flex-wrap:wrap;">
      <a class="btn primary" href="/admin">Refresh</a>
      <a class="btn" href="/logout">Logout</a>
    </div>
  </div>

  <div class="card span-8">
    <h3>Recent Attendance</h3>
    <p>Latest 200 attendance records.</p>

    <div style="margin-top:12px;">
      <table class="table">
        <thead>
          <tr>
            <th>Student Email</th>
            <th>Class ID</th>
            <th>Timestamp</th>
          </tr>
        </thead>
        <tbody>
          {% if records %}
            {% for row in records %}
            <tr>
              <td>{{ row["email"] }}</td>
              <td>{{ row["class_id"] }}</td>
              <td>{{ row["timestamp"] }}</td>
            </tr>
            {% endfor %}
          {% else %}
            <tr>
              <td colspan="3">No attendance records found</td>
            </tr>
          {% endif %}
        </tbody>
      </table>
    </div>
  </div>
</div>

<div class="small-link">
  Next: Admin can manage Classes • Schedules • Teacher-Class mapping (Step 5)
</div>
{% endblock %}
