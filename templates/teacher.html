{% extends "base.html" %}

{% block content %}
<h2 style="margin-top:0;">Teacher Dashboard</h2>
<p class="hint">Select your class and generate OTP.</p>

{% if error %}
  <div class="alert bad">{{ error }}</div>
{% endif %}

<div class="card">
  <h3>Generate OTP</h3>

  <form action="/generate_otp" method="POST" style="margin-top:12px;">
    <div class="field">
      <label>Select Class</label>
      <select name="class_id" required>
        <option value="">Select class</option>
        {% for c in classes %}
          <option value="{{ c['id'] }}"
            {% if selected_class_id and (selected_class_id|int) == c['id'] %}selected{% endif %}>
            {{ c["name"] }} ({{ c["class_code"] }})
          </option>
        {% endfor %}
      </select>
    </div>

    <div class="actions">
      <button class="btn primary" type="submit">Generate OTP</button>
    </div>
  </form>

  {% if otp %}
    <div class="alert good" style="margin-top:12px;">
      OTP: <b style="font-size:16px;">{{ otp }}</b> (valid 60 seconds)
    </div>
  {% endif %}
</div>

{% endblock %}
